# 1.文件系统和文件

管理持久数据 提供读取和存储

分配空间 空闲管理 分配算法

文件属性

# 2.文件描述符

描述文件状态：指针 计数 位置 权限...

系统提供接口 os需要管理磁盘上的数据的组合形式

进程读写文件单位是块4096个字节

访问模式：顺序访问 随机访问 索引访问

内部结构：无结构 简单结构 复杂结构

共享和权限控制

语义一致性

# 3.目录别名和种类

文件以目录的形式管理起来，需要分层，目录是特殊的文件，就是文件的索引表。

搜索 创建 删除等操作就是对目录做操作，内核操作，用户用systemctl

目录实现：线性表 哈希表

文件别名：多个文件指向一个文件 硬软链接

文件指向不能发生循环：链接时候检查 

文件系统挂载：先挂载才能进行访问

种类：磁盘 数据库 日志 网络 虚拟 特殊

# 4.虚拟文件系统

抹平底层差异 对上层提供统一的接口

基本数据结构：文件卷控制块、文件控制块、目录项

卷控制块(每个文件系统一个)、文件控制块(每个文件一个)、目录节点(每个目录一个)

放在外存中维护

# 5.文件缓存和打开

磁盘缓存 内存虚拟缓存 数据块缓存

两种缓存机制：数据块缓存(虚拟页对换 虚拟页式存储)

打开文件时的数据结构：每个被打开文件有文件描述符，每个进程有一个打开文件表，还有文件锁来进行协调访问

# 6.文件分配

大多数文件都很小、小部分很大，需要合理安排

分配方法：连续 链式 索引 有各自优缺点

对于大文件的索引分配：链式索引块 多级索引块

ufs多级分配实例：一级二级三级混合

# 7.空闲管理和磁盘阵列

空闲管理：位图 链表

冗余磁盘阵列：多个复制，条带化提高效率和可靠性

有RAID0 1 4 等区别 其中还可以互相组合